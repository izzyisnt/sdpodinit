#!/bin/bash
set -euo pipefail

if [[ $# -ne 1 ]]; then
  echo "âŒ  usage: $0 <target_name>"
  exit 1
fi

TARGET=$1
DEST_DIR="/root/SurfDock/data/eval_sample_dirs/test_samples/${TARGET}"

echo "ğŸ“¦  Preparing SurfDock inputs for   $TARGET"
echo "ğŸ”¸ destination directory           $DEST_DIR"
mkdir -p "$DEST_DIR"

# ---------- sanity checks ----------
[[ -f ligand.sdf   ]] || { echo "âŒ ligand.sdf not found";   exit 1; }
[[ -f protein.pdb  ]] || { echo "âŒ protein.pdb not found";  exit 1; }

# ---------- copy & rename ----------
cp ligand.sdf      "$DEST_DIR/${TARGET}_ligand.sdf"
echo "âœ… copied ligand.sdf      â†’ ${TARGET}_ligand.sdf"

if [[ -f ligand.mol2 ]]; then
  cp ligand.mol2    "$DEST_DIR/${TARGET}_ligand.mol2"
  echo "âœ… copied ligand.mol2    â†’ ${TARGET}_ligand.mol2"
fi

cp protein.pdb     "$DEST_DIR/${TARGET}_protein_processed.pdb"
echo "âœ… copied protein.pdb    â†’ ${TARGET}_protein_processed.pdb"

echo "ğŸ‰  SurfDock inputs ready in $DEST_DIR"
